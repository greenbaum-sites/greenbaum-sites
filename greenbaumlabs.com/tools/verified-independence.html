<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verified Independence | Greenbaum Labs</title>
    <style>
        @font-face {
            font-family: 'GL Serif';
            src: local('Cormorant Garamond'), local('Georgia'), local('Times New Roman');
        }
        @font-face {
            font-family: 'GL Mono';
            src: local('JetBrains Mono'), local('Fira Code'), local('Consolas'), local('Monaco');
        }
        @font-face {
            font-family: 'GL Sans';
            src: local('Instrument Sans'), local('Inter'), local('-apple-system'), local('BlinkMacSystemFont');
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --bg-card: #141414;
            --border-subtle: #222222;
            --border-active: #333333;
            --text-primary: #f5f5f5;
            --text-secondary: #a0a0a0;
            --text-muted: #666666;
            
            --recovery-olive: #6b7b4a;
            --recovery-olive-dim: rgba(107, 123, 74, 0.2);
            --signal-blue: #4a90d9;
            --failure-orange: #d97b4a;
            --governance-maroon: #8b2332;
            
            --neutral: #a0a0a0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'GL Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 2rem 0 3rem;
            border-bottom: 1px solid var(--border-subtle);
            margin-bottom: 2rem;
        }

        .header-label {
            font-family: 'GL Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .header h1 {
            font-family: 'GL Serif', Georgia, serif;
            font-size: 2.5rem;
            font-weight: 400;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }

        .header-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .r-line-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'GL Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            padding: 0.4rem 0.8rem;
            background: var(--recovery-olive-dim);
            border: 1px solid var(--recovery-olive);
            border-radius: 2px;
            color: var(--recovery-olive);
        }

        .r-line-badge .r-icon {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--recovery-olive);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'GL Serif', Georgia, serif;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* Workflow Steps */
        .workflow {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .step {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 4px;
            overflow: hidden;
        }

        .step-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
        }

        .step-header:hover {
            background: rgba(255,255,255,0.02);
        }

        .step-number {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'GL Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .step.complete .step-number {
            background: var(--recovery-olive);
            border-color: var(--recovery-olive);
            color: white;
        }

        .step.active .step-number {
            border-color: var(--recovery-olive);
            color: var(--recovery-olive);
        }

        .step-title {
            font-family: 'GL Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--text-secondary);
            flex: 1;
        }

        .step.active .step-title {
            color: var(--text-primary);
        }

        .step-toggle {
            font-size: 0.8rem;
            color: var(--text-muted);
            transition: transform 0.2s ease;
        }

        .step.expanded .step-toggle {
            transform: rotate(180deg);
        }

        .step-body {
            display: none;
            padding: 1.25rem;
        }

        .step.expanded .step-body {
            display: block;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.35rem;
            font-family: 'GL Mono', monospace;
            letter-spacing: 0.05em;
        }

        .form-label .optional {
            color: var(--text-muted);
            font-weight: normal;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 2px;
            padding: 0.6rem 0.75rem;
            font-family: 'GL Sans', sans-serif;
            font-size: 0.85rem;
            color: var(--text-primary);
            transition: border-color 0.2s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--recovery-olive);
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: var(--text-muted);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }

        .form-textarea.artifact {
            min-height: 200px;
            font-family: 'GL Mono', monospace;
            font-size: 0.8rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* Buttons */
        .btn {
            padding: 0.7rem 1.25rem;
            border: none;
            border-radius: 2px;
            font-family: 'GL Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--recovery-olive);
            color: white;
        }

        .btn-primary:hover {
            filter: brightness(1.15);
        }

        .btn-primary:disabled {
            background: var(--bg-tertiary);
            color: var(--text-muted);
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--border-subtle);
        }

        .btn-secondary:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .btn-group {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        /* Scan Results */
        .scan-status {
            font-family: 'GL Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.75rem;
            padding: 0.5rem;
            background: var(--bg-tertiary);
            border-radius: 2px;
        }

        .scan-status.complete {
            color: var(--recovery-olive);
            border-left: 2px solid var(--recovery-olive);
        }

        /* Before/After Diff */
        .diff-section {
            margin-bottom: 1.5rem;
        }

        .diff-section-title {
            font-family: 'GL Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .position-shift {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }

        .position-box {
            flex: 1;
            text-align: center;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border-radius: 2px;
        }

        .position-label {
            font-family: 'GL Mono', monospace;
            font-size: 0.6rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .position-value {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .position-arrow {
            font-size: 1.25rem;
            color: var(--text-muted);
        }

        .position-note {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-align: center;
            font-style: italic;
        }

        /* Delta Grid */
        .delta-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .delta-column {
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
        }

        .delta-column-header {
            font-family: 'GL Mono', monospace;
            font-size: 0.65rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            padding: 0.5rem 0.75rem;
            background: var(--bg-tertiary);
            color: var(--text-muted);
            text-align: center;
        }

        .delta-column-body {
            padding: 0.5rem;
            min-height: 80px;
        }

        .delta-item {
            padding: 0.4rem 0.5rem;
            margin-bottom: 0.35rem;
            background: var(--bg-tertiary);
            border-radius: 2px;
            font-size: 0.75rem;
        }

        .delta-item:last-child {
            margin-bottom: 0;
        }

        .delta-item-id {
            font-family: 'GL Mono', monospace;
            font-weight: 600;
            font-size: 0.7rem;
        }

        .delta-item-id.fm { color: var(--failure-orange); }
        .delta-item-id.ffn { color: var(--signal-blue); }

        .delta-item-detail {
            font-family: 'GL Mono', monospace;
            font-size: 0.6rem;
            color: var(--text-muted);
            margin-top: 0.2rem;
        }

        .delta-empty {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-align: center;
            padding: 1rem;
            font-style: italic;
        }

        /* Intensity Summary */
        .intensity-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 4px;
        }

        .intensity-item {
            text-align: center;
            padding: 0.5rem;
        }

        .intensity-label {
            font-family: 'GL Mono', monospace;
            font-size: 0.55rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--text-muted);
        }

        .intensity-value {
            font-family: 'GL Mono', monospace;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        /* Evidence Pack */
        .evidence-item {
            margin-bottom: 1.25rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .evidence-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .evidence-label {
            font-family: 'GL Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .evidence-prompt {
            font-size: 0.85rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* Verification Statement */
        .verification-box {
            background: var(--bg-secondary);
            border: 1px solid var(--recovery-olive);
            border-radius: 4px;
            padding: 1.25rem;
        }

        .verification-title {
            font-family: 'GL Serif', Georgia, serif;
            font-size: 1rem;
            margin-bottom: 1rem;
            color: var(--recovery-olive);
        }

        .verification-fields {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }

        .verification-note {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-style: italic;
            margin-top: 1rem;
            text-align: center;
        }

        /* Export */
        .export-section {
            display: flex;
            gap: 0.5rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-subtle);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem 0;
            border-top: 1px solid var(--border-subtle);
            margin-top: 2rem;
        }

        .footer-quote {
            font-family: 'GL Serif', Georgia, serif;
            font-size: 1.1rem;
            font-style: italic;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .footer-note {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .footer-version {
            font-family: 'GL Mono', monospace;
            font-size: 0.6rem;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
        }

        /* No data state */
        .no-data {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
        }

        .no-data-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            opacity: 0.3;
        }

        /* Responsive */
        @media (max-width: 700px) {
            .form-row,
            .verification-fields {
                grid-template-columns: 1fr;
            }
            .delta-grid {
                grid-template-columns: 1fr;
            }
            .intensity-summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-label">Greenbaum Labs</div>
            <h1>Verified Independence</h1>
            <p class="header-subtitle">Recovery is structural. This records proof.</p>
            <div class="r-line-badge">
                <span class="r-icon">R</span>
                <span>Recovery Line</span>
            </div>
        </header>

        <!-- Workflow -->
        <div class="workflow">
            <!-- Step 1: Case Setup -->
            <div class="step expanded active" id="step1">
                <div class="step-header" onclick="toggleStep(1)">
                    <div class="step-number">1</div>
                    <span class="step-title">Case Setup</span>
                    <span class="step-toggle">▼</span>
                </div>
                <div class="step-body">
                    <div class="form-group">
                        <label class="form-label">Case Name</label>
                        <input type="text" class="form-input" id="caseName" placeholder="e.g., Q4 Escalation Path Repair">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Scope Statement <span class="optional">(one sentence)</span></label>
                        <input type="text" class="form-input" id="scopeStatement" placeholder="What specific fix or change is being verified?">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Declaration ID <span class="optional">(optional)</span></label>
                            <input type="text" class="form-input" id="declarationId" placeholder="From Declaration Log">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Date Window</label>
                            <input type="text" class="form-input" id="dateWindow" placeholder="e.g., Jan 15 - Feb 1, 2026">
                        </div>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="completeStep(1)">Continue</button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Before Artifact -->
            <div class="step" id="step2">
                <div class="step-header" onclick="toggleStep(2)">
                    <div class="step-number">2</div>
                    <span class="step-title">Before Artifact</span>
                    <span class="step-toggle">▼</span>
                </div>
                <div class="step-body">
                    <div class="form-group">
                        <label class="form-label">Artifact (Before State)</label>
                        <textarea class="form-textarea artifact" id="beforeArtifact" placeholder="Paste transcript, email thread, meeting notes, or other text that represents the system BEFORE the fix..."></textarea>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="runBeforeScan()">Analyze Before Artifact</button>
                    </div>
                    <div class="scan-status" id="beforeStatus" style="display: none;"></div>
                </div>
            </div>

            <!-- Step 3: After Artifact -->
            <div class="step" id="step3">
                <div class="step-header" onclick="toggleStep(3)">
                    <div class="step-number">3</div>
                    <span class="step-title">After Artifact</span>
                    <span class="step-toggle">▼</span>
                </div>
                <div class="step-body">
                    <div class="form-group">
                        <label class="form-label">Artifact (After State)</label>
                        <textarea class="form-textarea artifact" id="afterArtifact" placeholder="Paste transcript, email thread, meeting notes, or other text that represents the system AFTER the fix..."></textarea>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="runAfterScan()">Analyze After Artifact</button>
                    </div>
                    <div class="scan-status" id="afterStatus" style="display: none;"></div>
                </div>
            </div>

            <!-- Step 4: Before/After Diff -->
            <div class="step" id="step4">
                <div class="step-header" onclick="toggleStep(4)">
                    <div class="step-number">4</div>
                    <span class="step-title">Before/After Diff</span>
                    <span class="step-toggle">▼</span>
                </div>
                <div class="step-body" id="diffBody">
                    <div class="no-data">
                        <div class="no-data-icon">◎</div>
                        <p>Complete scans on both artifacts to see the diff</p>
                    </div>
                </div>
            </div>

            <!-- Step 5: Evidence Pack -->
            <div class="step" id="step5">
                <div class="step-header" onclick="toggleStep(5)">
                    <div class="step-number">5</div>
                    <span class="step-title">Evidence Pack</span>
                    <span class="step-toggle">▼</span>
                </div>
                <div class="step-body">
                    <div class="evidence-item">
                        <div class="evidence-label">Evidence A</div>
                        <div class="evidence-prompt">What changed in the system?</div>
                        <textarea class="form-textarea" id="evidenceA" placeholder="Describe the structural change..."></textarea>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-label">Evidence B</div>
                        <div class="evidence-prompt">What was removed or eliminated?</div>
                        <textarea class="form-textarea" id="evidenceB" placeholder="What no longer exists..."></textarea>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-label">Evidence C</div>
                        <div class="evidence-prompt">What no longer requires escalation?</div>
                        <textarea class="form-textarea" id="evidenceC" placeholder="Decisions that now resolve locally..."></textarea>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-label">Evidence D</div>
                        <div class="evidence-prompt">What can a new hire do without tribal knowledge?</div>
                        <textarea class="form-textarea" id="evidenceD" placeholder="Tasks that no longer require institutional memory..."></textarea>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-label">Evidence E</div>
                        <div class="evidence-prompt">What happens when the expert is unavailable?</div>
                        <textarea class="form-textarea" id="evidenceE" placeholder="How the system handles absence..."></textarea>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="completeStep(5)">Continue to Verification</button>
                    </div>
                </div>
            </div>

            <!-- Step 6: Verification Statement -->
            <div class="step" id="step6">
                <div class="step-header" onclick="toggleStep(6)">
                    <div class="step-number">6</div>
                    <span class="step-title">Verification Statement</span>
                    <span class="step-toggle">▼</span>
                </div>
                <div class="step-body">
                    <div class="verification-box">
                        <div class="verification-status" id="verificationStatus">
                            <span style="font-family: 'GL Mono', monospace; font-size: 0.7rem; color: var(--text-muted);">Status:</span>
                            <span style="font-family: 'GL Mono', monospace; font-size: 0.7rem; color: var(--text-muted); font-style: italic;" id="verificationStatusText">Not yet verified</span>
                        </div>
                        <div class="verification-title">Verification Record</div>
                        <div class="verification-fields">
                            <div class="form-group">
                                <label class="form-label">Verified By</label>
                                <input type="text" class="form-input" id="verifiedBy" placeholder="Name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Role</label>
                                <input type="text" class="form-input" id="verifiedRole" placeholder="Role / Authority">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Date</label>
                                <input type="date" class="form-input" id="verifiedDate">
                            </div>
                        </div>
                        <div class="verification-note">
                            This tool surfaces evidence. The human signs the verification.
                        </div>
                    </div>

                    <div class="export-section">
                        <button class="btn btn-secondary" onclick="exportJSON()">Export JSON</button>
                        <button class="btn btn-secondary" onclick="exportMarkdown()">Export Markdown</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-quote">"Structural repair, not optics."</div>
            <p class="footer-note" style="margin-bottom: 0.5rem;">Verification records persist even if conditions change later.</p>
            <p class="footer-note">AR-001: Observes, summarizes, suggests. Does not decide.</p>
            <div class="footer-version">
                <span>Verified Independence v0.1</span>
                <span>2026-02-03</span>
            </div>
        </footer>
    </div>

    <script>
        // ============================================
        // FM DATA (17 Failure Modes)
        // ============================================
        const FM_DATA = {
            "FM-01": { name: "Responsibility Compression", keywords: ["responsibility", "compression", "edge", "burden", "frontline", "absorb", "pushed down", "accountability"], patterns: [/responsibility.{0,20}(compress|accumulate|concentrate)/i, /(edge|frontline).{0,20}(absorb|carry|bear)/i] },
            "FM-02": { name: "Escalation Inversion", keywords: ["escalation", "inversion", "inverted", "surface", "risk", "discouraged", "costly"], patterns: [/escalat.{0,20}(invert|inverted|costly|discouraged)/i, /(don't|doesn't) escalate.{0,15}(because|due)/i] },
            "FM-03": { name: "Responsibility Without Authority", keywords: ["responsibility", "authority", "accountability", "decision rights", "resources", "formal"], patterns: [/responsibility.{0,15}without.{0,15}authority/i, /accountable.{0,15}(but|without).{0,15}(authority|decision)/i] },
            "FM-04": { name: "Metric Shadowing", keywords: ["metric", "shadow", "proxy", "reality", "optimize", "visible", "unmeasured"], patterns: [/metric.{0,15}(shadow|proxy|replace)/i, /(visible|measured).{0,20}(unmeasured|invisible) (cost|risk)/i] },
            "FM-05": { name: "Normalized Workarounds", keywords: ["workaround", "normalized", "temporary", "permanent", "fix", "exception", "informal"], patterns: [/workaround.{0,15}(normal|permanent|standard)/i, /temporary.{0,15}(became|become|permanent)/i] },
            "FM-06": { name: "Exception Inflation", keywords: ["exception", "inflation", "expand", "dominant", "edge case", "rule"], patterns: [/exception.{0,15}(inflat|expand|dominant)/i, /edge case.{0,15}(became|become|now) (the )?(norm|standard)/i] },
            "FM-07": { name: "Coordination Decay", keywords: ["coordination", "decay", "handoff", "fragmented", "ownership", "end-to-end"], patterns: [/coordination.{0,15}(decay|fragment|break)/i, /(no one|nobody) owns.{0,15}end.?to.?end/i] },
            "FM-08": { name: "Decision Latency", keywords: ["decision", "latency", "delay", "alignment", "permission", "slow"], patterns: [/decision.{0,15}(latency|delay|stall)/i, /alignment.{0,15}(requirement|expand|delay)/i] },
            "FM-09": { name: "Over-Escalation", keywords: ["over-escalation", "pushed up", "transfer", "accountability", "defensive"], patterns: [/(over.?escalat|pushed up).{0,15}(transfer|avoid|defensive)/i] },
            "FM-10": { name: "Leadership Saturation", keywords: ["leadership", "saturation", "bottleneck", "senior", "overload", "default"], patterns: [/(leadership|leader).{0,15}(saturat|bottleneck|overload)/i, /senior.{0,15}(default|everything|all)/i] },
            "FM-11": { name: "Metric Authority Drift", keywords: ["metric", "authority", "drift", "judgment", "indicator", "decision"], patterns: [/metric.{0,15}(replac|drift|authority)/i, /(number|metric).{0,15}(decide|judgment)/i] },
            "FM-12": { name: "Strategic Myopia", keywords: ["strategic", "myopia", "short-term", "near-term", "visibility", "horizon"], patterns: [/strategic.{0,15}myopia/i, /(short|near).?term.{0,20}(visibility|horizon|blind)/i] },
            "FM-13": { name: "Capability Atrophy", keywords: ["capability", "atrophy", "decay", "skill", "execute", "knowledge"], patterns: [/capability.{0,15}(atrophy|decay|erode)/i, /(skill|knowledge).{0,15}(lost|decay|erode)/i] },
            "FM-14": { name: "Narrative Collapse", keywords: ["narrative", "collapse", "story", "meaning", "fragment", "why"], patterns: [/narrative.{0,15}(collapse|fragment|lost)/i, /(shared|common).{0,15}(story|meaning).{0,15}(lost|fragment)/i] },
            "FM-15": { name: "Trust Exhaustion", keywords: ["trust", "exhaustion", "deplete", "erosion", "belief", "compliance"], patterns: [/trust.{0,15}(exhaust|deplete|erode)/i, /(belief|faith).{0,15}(collapse|gone|lost)/i] },
            "FM-16": { name: "Process Inflation", keywords: ["process", "inflation", "complexity", "bureaucracy", "overhead"], patterns: [/process.{0,15}(inflat|complexity|overhead)/i, /bureaucra.{0,15}(expand|grow|accumulat)/i] },
            "FM-17": { name: "Structural Amnesia", keywords: ["structural", "amnesia", "forget", "why", "context", "memory"], patterns: [/structural.{0,15}amnesia/i, /(forgot|forget|lost).{0,15}why.{0,15}(decision|policy)/i] }
        };

        // ============================================
        // FFN DATA (21 Field Notes)
        // ============================================
        const FFN_DATA = {
            "FFN-01": { name: "Responsibility Compression", keywords: ["responsibility", "burden", "absorb", "frontline", "edge", "pushed down", "accountability", "ownership", "carrying", "load", "backstop"], patterns: [/falls? (on|to) (me|us)/i, /(I|we) (end up|always) (handling|dealing|absorbing)/i] },
            "FFN-02": { name: "Interpretive Drift", keywords: ["means", "interpret", "disagree", "meaning", "understand", "clarity", "consensus", "divergent", "defensiveness", "argue"], patterns: [/the data says.{0,20}but/i, /(disagree|different) (on |about )?(what|how) (it|this|that) means/i] },
            "FFN-03": { name: "Authority Without Commitment", keywords: ["authority", "decision", "defer", "wait", "commitment", "consensus", "scope", "ownership", "stall", "indecision"], patterns: [/let's wait (for|until) (more )?(data|clarity|alignment)/i, /we should.{0,30}but (let's|we need to)/i] },
            "FFN-04": { name: "Escalation Inversion", keywords: ["escalate", "escalation", "surface", "risk", "upward", "senior", "circulate", "urgent", "weigh in", "hierarchy"], patterns: [/escalate.{0,20}even (when|though)/i, /weigh in.{0,15}without (clear|specific)/i] },
            "FFN-05": { name: "Escalation Bounceback", keywords: ["return", "bounce", "back", "circulate", "loop", "pass", "redirect", "handling"], patterns: [/thought you were handling/i, /(came|sent|went) back (to|without)/i] },
            "FFN-06": { name: "Signal Misread", keywords: ["tracking", "code", "category", "mismatch", "capture", "reality", "actual", "log", "record"], patterns: [/(tracking|code|category) (doesn't|don't) (match|reflect|capture)/i] },
            "FFN-07": { name: "Orphaned Escalation", keywords: ["owner", "ownership", "responsible", "handoff", "queue", "age", "movement", "closure"], patterns: [/who('s| is) responsible for (this|that|closing)/i, /(no one|nobody) owns (the |this )?resolution/i] },
            "FFN-08": { name: "Authority Fog", keywords: ["unclear", "authority", "approve", "approval", "who can", "permission", "process", "procedure"], patterns: [/(who|unclear who) can approve/i, /(don't|doesn't) know who (can|has) (authority|approval)/i] },
            "FFN-09": { name: "Shadow Infrastructure", keywords: ["workaround", "bypass", "homegrown", "informal", "shadow", "actual", "really", "unofficial"], patterns: [/(here's |this is )how (we|it) (actually|really)/i, /(ignore|don't follow) (the |that )?(doc|documentation|process)/i] },
            "FFN-10": { name: "Metric Displacement", keywords: ["metric", "score", "scorecard", "measured", "optimize", "dashboard", "KPI", "unmeasured"], patterns: [/(numbers|metrics|dashboard) (look|looks) (good|fine).{0,15}but/i] },
            "FFN-11": { name: "Context Gap", keywords: ["context", "baseline", "comparison", "rate", "volume", "without", "missing", "absent"], patterns: [/(results|numbers|data) (without|missing|lacking) (context|baseline|comparison)/i] },
            "FFN-12": { name: "Authority Without Permission", keywords: ["authority", "permission", "check", "approval", "formal", "paper", "practice", "seek"], patterns: [/(have|has) (the )?authority (but|yet).{0,15}(check|approval|permission)/i] },
            "FFN-13": { name: "Alignment Creep", keywords: ["alignment", "stakeholder", "loop in", "buy-in", "consensus", "consultation", "include"], patterns: [/loop in (one more|another)/i, /stakeholder (list|requirements).{0,15}(expand|grew|growing)/i] },
            "FFN-14": { name: "Frozen Recognition", keywords: ["acknowledge", "recognize", "know", "should", "standardize", "problem", "fix", "address"], patterns: [/we (should|need to) (standardize|fix|address) this/i] },
            "FFN-15": { name: "Permission Cascade", keywords: ["permission", "approval", "boundary", "team", "cross-functional", "handoff", "sign-off"], patterns: [/(need|require) sign.?off from (their|that|another) (side|team)/i] },
            "FFN-16": { name: "Defensive Escalation", keywords: ["escalate", "defensive", "cover", "blame", "protect", "document", "CYA", "visibility"], patterns: [/(escalat|push).{0,15}(avoid|transfer|shift).{0,15}(blame|accountability)/i] },
            "FFN-17": { name: "Horizon Collapse", keywords: ["short-term", "long-term", "quarter", "immediate", "future", "later", "strategy", "horizon"], patterns: [/(deal with|address|worry about) (that|it) later/i] },
            "FFN-18": { name: "Now Over Later", keywords: ["quarter", "quarterly", "immediate", "now", "later", "future", "trade-off", "short-term"], patterns: [/(know|acknowledge).{0,15}but.{0,15}(need|have to).{0,15}(this|the) quarter/i] },
            "FFN-19": { name: "Judgment Erosion", keywords: ["overwork", "burnout", "judgment", "prioritize", "delegate", "capacity", "exhausted", "tired"], patterns: [/(struggle|struggling) to (prioritize|delegate|focus)/i] },
            "FFN-20": { name: "Memory Scatter", keywords: ["recall", "remember", "decided", "agreed", "thought", "version", "narrative", "alignment"], patterns: [/thought we (agreed|decided)/i, /(different|conflicting) (version|memory|recollection)/i] },
            "FFN-21": { name: "Opaque Logic Drift", keywords: ["AI", "logic", "explain", "reasoning", "opaque", "trust", "why", "understand"], patterns: [/why did (it|the (AI|system|model)) (do|decide|recommend)/i] }
        };

        // ============================================
        // STATE
        // ============================================
        let beforeResults = null;
        let afterResults = null;

        // ============================================
        // SCANNING LOGIC
        // ============================================
        function chunkText(text, chunkSize = 400) {
            const sentences = text.split(/(?<=[.!?])\s+/);
            const chunks = [];
            let current = "";
            for (const sentence of sentences) {
                if ((current + sentence).length <= chunkSize) {
                    current += sentence + " ";
                } else {
                    if (current.trim()) chunks.push(current.trim());
                    current = sentence + " ";
                }
            }
            if (current.trim()) chunks.push(current.trim());
            return chunks.length > 0 ? chunks : [text];
        }

        function scanText(text) {
            const chunks = chunkText(text);
            const fmMatches = {};
            const ffnMatches = {};

            for (const chunk of chunks) {
                const chunkLower = chunk.toLowerCase();

                // Scan FMs
                for (const [fmId, fmData] of Object.entries(FM_DATA)) {
                    const keywordHits = fmData.keywords.filter(kw => chunkLower.includes(kw.toLowerCase())).length;
                    const keywordDensity = keywordHits / fmData.keywords.length;
                    const patternHits = fmData.patterns.filter(p => p.test(chunk));

                    if (keywordDensity > 0.25 || patternHits.length > 0) {
                        if (!fmMatches[fmId]) {
                            fmMatches[fmId] = { id: fmId, name: fmData.name, count: 0, strength: 'low' };
                        }
                        fmMatches[fmId].count++;
                        if (patternHits.length > 0) {
                            fmMatches[fmId].strength = keywordDensity > 0.3 ? 'high' : 'medium';
                        } else if (fmMatches[fmId].strength === 'low' && keywordDensity > 0.3) {
                            fmMatches[fmId].strength = 'medium';
                        }
                    }
                }

                // Scan FFNs
                for (const [ffnId, ffnData] of Object.entries(FFN_DATA)) {
                    const keywordHits = ffnData.keywords.filter(kw => chunkLower.includes(kw.toLowerCase())).length;
                    const keywordDensity = keywordHits / ffnData.keywords.length;
                    const patternHits = ffnData.patterns.filter(p => p.test(chunk));

                    if (keywordDensity > 0.2 || patternHits.length > 0) {
                        if (!ffnMatches[ffnId]) {
                            ffnMatches[ffnId] = { id: ffnId, name: ffnData.name, count: 0, strength: 'low' };
                        }
                        ffnMatches[ffnId].count++;
                        if (patternHits.length > 0) {
                            ffnMatches[ffnId].strength = keywordDensity > 0.25 ? 'high' : 'medium';
                        } else if (ffnMatches[ffnId].strength === 'low' && keywordDensity > 0.25) {
                            ffnMatches[ffnId].strength = 'medium';
                        }
                    }
                }
            }

            // Determine position
            const fmCount = Object.keys(fmMatches).length;
            const ffnCount = Object.keys(ffnMatches).length;
            let position = 'No Position';
            if (fmCount > 0 && ffnCount > 0) position = 'S→F Transition';
            else if (fmCount > 0) position = 'Failure Modes Line';
            else if (ffnCount > 0) position = 'Signal Line';

            return {
                fms: fmMatches,
                ffns: ffnMatches,
                position: position,
                fmCount: fmCount,
                ffnCount: ffnCount
            };
        }

        // ============================================
        // STEP LOGIC
        // ============================================
        function toggleStep(num) {
            const step = document.getElementById(`step${num}`);
            step.classList.toggle('expanded');
        }

        function completeStep(num) {
            const step = document.getElementById(`step${num}`);
            step.classList.add('complete');
            step.classList.remove('expanded');

            const nextStep = document.getElementById(`step${num + 1}`);
            if (nextStep) {
                nextStep.classList.add('active', 'expanded');
            }
        }

        function runBeforeScan() {
            const text = document.getElementById('beforeArtifact').value.trim();
            if (!text) {
                alert('Please paste an artifact first');
                return;
            }

            beforeResults = scanText(text);
            
            const status = document.getElementById('beforeStatus');
            status.style.display = 'block';
            status.classList.add('complete');
            status.textContent = `Scan complete: ${beforeResults.fmCount} FMs, ${beforeResults.ffnCount} FFNs detected. Position: ${beforeResults.position}`;

            completeStep(2);
            checkDiffReady();
        }

        function runAfterScan() {
            const text = document.getElementById('afterArtifact').value.trim();
            if (!text) {
                alert('Please paste an artifact first');
                return;
            }

            afterResults = scanText(text);
            
            const status = document.getElementById('afterStatus');
            status.style.display = 'block';
            status.classList.add('complete');
            status.textContent = `Scan complete: ${afterResults.fmCount} FMs, ${afterResults.ffnCount} FFNs detected. Position: ${afterResults.position}`;

            completeStep(3);
            checkDiffReady();
        }

        function checkDiffReady() {
            if (beforeResults && afterResults) {
                renderDiff();
                const step4 = document.getElementById('step4');
                step4.classList.add('complete', 'expanded');
            }
        }

        // ============================================
        // DIFF RENDERING
        // ============================================
        function computeDelta(before, after, type) {
            const beforeIds = new Set(Object.keys(before));
            const afterIds = new Set(Object.keys(after));

            const disappeared = [];
            const persisted = [];
            const appeared = [];

            // Disappeared
            for (const id of beforeIds) {
                if (!afterIds.has(id)) {
                    disappeared.push({
                        ...before[id],
                        type: type,
                        beforeCount: before[id].count,
                        afterCount: 0,
                        beforeStrength: before[id].strength,
                        afterStrength: null
                    });
                }
            }

            // Appeared
            for (const id of afterIds) {
                if (!beforeIds.has(id)) {
                    appeared.push({
                        ...after[id],
                        type: type,
                        beforeCount: 0,
                        afterCount: after[id].count,
                        beforeStrength: null,
                        afterStrength: after[id].strength
                    });
                }
            }

            // Persisted
            for (const id of beforeIds) {
                if (afterIds.has(id)) {
                    persisted.push({
                        id: id,
                        name: before[id].name,
                        type: type,
                        beforeCount: before[id].count,
                        afterCount: after[id].count,
                        beforeStrength: before[id].strength,
                        afterStrength: after[id].strength
                    });
                }
            }

            return { disappeared, persisted, appeared };
        }

        function computeIntensity(delta) {
            let increased = 0;
            let decreased = 0;

            for (const item of delta.persisted) {
                if (item.afterCount > item.beforeCount) increased++;
                else if (item.afterCount < item.beforeCount) decreased++;
            }

            // Appeared = increased (from 0)
            increased += delta.appeared.length;
            // Disappeared = decreased (to 0)
            decreased += delta.disappeared.length;

            return { increased, decreased };
        }

        function renderDiff() {
            const body = document.getElementById('diffBody');
            
            const fmDelta = computeDelta(beforeResults.fms, afterResults.fms, 'fm');
            const ffnDelta = computeDelta(beforeResults.ffns, afterResults.ffns, 'ffn');
            const fmIntensity = computeIntensity(fmDelta);
            const ffnIntensity = computeIntensity(ffnDelta);

            body.innerHTML = `
                <!-- Position Shift -->
                <div class="diff-section">
                    <div class="diff-section-title">Position Shift</div>
                    <div class="position-shift">
                        <div class="position-box">
                            <div class="position-label">Before</div>
                            <div class="position-value">${beforeResults.position}</div>
                        </div>
                        <div class="position-arrow">→</div>
                        <div class="position-box">
                            <div class="position-label">After</div>
                            <div class="position-value">${afterResults.position}</div>
                        </div>
                    </div>
                    <div class="position-note">Shift indicates orientation only.</div>
                </div>

                <!-- Failure Modes Delta -->
                <div class="diff-section">
                    <div class="diff-section-title">Failure Modes Delta</div>
                    <div class="delta-grid">
                        <div class="delta-column">
                            <div class="delta-column-header">Disappeared</div>
                            <div class="delta-column-body">
                                ${fmDelta.disappeared.length === 0 ? '<div class="delta-empty">None</div>' : 
                                    fmDelta.disappeared.map(item => renderDeltaItem(item)).join('')}
                            </div>
                        </div>
                        <div class="delta-column">
                            <div class="delta-column-header">Persisted</div>
                            <div class="delta-column-body">
                                ${fmDelta.persisted.length === 0 ? '<div class="delta-empty">None</div>' : 
                                    fmDelta.persisted.map(item => renderDeltaItem(item)).join('')}
                            </div>
                        </div>
                        <div class="delta-column">
                            <div class="delta-column-header">Appeared</div>
                            <div class="delta-column-body">
                                ${fmDelta.appeared.length === 0 ? '<div class="delta-empty">None</div>' : 
                                    fmDelta.appeared.map(item => renderDeltaItem(item)).join('')}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Field Notes Delta -->
                <div class="diff-section">
                    <div class="diff-section-title">Field Notes Delta</div>
                    <div class="delta-grid">
                        <div class="delta-column">
                            <div class="delta-column-header">Disappeared</div>
                            <div class="delta-column-body">
                                ${ffnDelta.disappeared.length === 0 ? '<div class="delta-empty">None</div>' : 
                                    ffnDelta.disappeared.map(item => renderDeltaItem(item)).join('')}
                            </div>
                        </div>
                        <div class="delta-column">
                            <div class="delta-column-header">Persisted</div>
                            <div class="delta-column-body">
                                ${ffnDelta.persisted.length === 0 ? '<div class="delta-empty">None</div>' : 
                                    ffnDelta.persisted.map(item => renderDeltaItem(item)).join('')}
                            </div>
                        </div>
                        <div class="delta-column">
                            <div class="delta-column-header">Appeared</div>
                            <div class="delta-column-body">
                                ${ffnDelta.appeared.length === 0 ? '<div class="delta-empty">None</div>' : 
                                    ffnDelta.appeared.map(item => renderDeltaItem(item)).join('')}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Intensity Summary -->
                <div class="diff-section">
                    <div class="diff-section-title">Intensity Summary</div>
                    <div class="intensity-summary">
                        <div class="intensity-item">
                            <div class="intensity-value">${fmIntensity.decreased}</div>
                            <div class="intensity-label">FMs Decreased</div>
                        </div>
                        <div class="intensity-item">
                            <div class="intensity-value">${fmIntensity.increased}</div>
                            <div class="intensity-label">FMs Increased</div>
                        </div>
                        <div class="intensity-item">
                            <div class="intensity-value">${ffnIntensity.decreased}</div>
                            <div class="intensity-label">FFNs Decreased</div>
                        </div>
                        <div class="intensity-item">
                            <div class="intensity-value">${ffnIntensity.increased}</div>
                            <div class="intensity-label">FFNs Increased</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDeltaItem(item) {
            const strengthChange = item.beforeStrength && item.afterStrength 
                ? `${item.beforeStrength} → ${item.afterStrength}` 
                : (item.afterStrength || item.beforeStrength || '—');
            
            return `
                <div class="delta-item">
                    <div class="delta-item-id ${item.type}">${item.id}</div>
                    <div class="delta-item-detail">
                        occurrences: ${item.beforeCount} → ${item.afterCount}<br>
                        signal: ${strengthChange}
                    </div>
                </div>
            `;
        }

        // ============================================
        // EXPORT
        // ============================================
        function gatherData() {
            return {
                case: {
                    name: document.getElementById('caseName').value,
                    scope: document.getElementById('scopeStatement').value,
                    declarationId: document.getElementById('declarationId').value || null,
                    dateWindow: document.getElementById('dateWindow').value
                },
                before: beforeResults,
                after: afterResults,
                evidence: {
                    A: document.getElementById('evidenceA').value || null,
                    B: document.getElementById('evidenceB').value || null,
                    C: document.getElementById('evidenceC').value || null,
                    D: document.getElementById('evidenceD').value || null,
                    E: document.getElementById('evidenceE').value || null
                },
                verification: {
                    verifiedBy: document.getElementById('verifiedBy').value || null,
                    role: document.getElementById('verifiedRole').value || null,
                    date: document.getElementById('verifiedDate').value || null
                },
                exportedAt: new Date().toISOString()
            };
        }

        function exportJSON() {
            const data = gatherData();
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `verification-${data.case.name?.replace(/\s+/g, '-') || 'case'}-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportMarkdown() {
            const data = gatherData();
            const fmDelta = beforeResults && afterResults ? computeDelta(beforeResults.fms, afterResults.fms, 'fm') : null;
            const ffnDelta = beforeResults && afterResults ? computeDelta(beforeResults.ffns, afterResults.ffns, 'ffn') : null;

            let md = `# Verification Record\n\n`;
            md += `**Case:** ${data.case.name || '—'}\n\n`;
            md += `**Scope:** ${data.case.scope || '—'}\n\n`;
            md += `**Declaration ID:** ${data.case.declarationId || '—'}\n\n`;
            md += `**Date Window:** ${data.case.dateWindow || '—'}\n\n`;
            md += `---\n\n`;

            md += `## Position Shift\n\n`;
            md += `- **Before:** ${data.before?.position || '—'}\n`;
            md += `- **After:** ${data.after?.position || '—'}\n\n`;
            md += `*Shift indicates orientation only.*\n\n`;

            if (fmDelta) {
                md += `## Failure Modes Delta\n\n`;
                md += `### Disappeared\n`;
                md += fmDelta.disappeared.length === 0 ? 'None\n\n' : fmDelta.disappeared.map(i => `- ${i.id}: ${i.beforeCount} → 0 (${i.beforeStrength} → —)\n`).join('') + '\n';
                md += `### Persisted\n`;
                md += fmDelta.persisted.length === 0 ? 'None\n\n' : fmDelta.persisted.map(i => `- ${i.id}: ${i.beforeCount} → ${i.afterCount} (${i.beforeStrength} → ${i.afterStrength})\n`).join('') + '\n';
                md += `### Appeared\n`;
                md += fmDelta.appeared.length === 0 ? 'None\n\n' : fmDelta.appeared.map(i => `- ${i.id}: 0 → ${i.afterCount} (— → ${i.afterStrength})\n`).join('') + '\n';
            }

            if (ffnDelta) {
                md += `## Field Notes Delta\n\n`;
                md += `### Disappeared\n`;
                md += ffnDelta.disappeared.length === 0 ? 'None\n\n' : ffnDelta.disappeared.map(i => `- ${i.id}: ${i.beforeCount} → 0 (${i.beforeStrength} → —)\n`).join('') + '\n';
                md += `### Persisted\n`;
                md += ffnDelta.persisted.length === 0 ? 'None\n\n' : ffnDelta.persisted.map(i => `- ${i.id}: ${i.beforeCount} → ${i.afterCount} (${i.beforeStrength} → ${i.afterStrength})\n`).join('') + '\n';
                md += `### Appeared\n`;
                md += ffnDelta.appeared.length === 0 ? 'None\n\n' : ffnDelta.appeared.map(i => `- ${i.id}: 0 → ${i.afterCount} (— → ${i.afterStrength})\n`).join('') + '\n';
            }

            md += `---\n\n`;
            md += `## Evidence Pack\n\n`;
            md += `**A. What changed in the system?**\n${data.evidence.A || '—'}\n\n`;
            md += `**B. What was removed or eliminated?**\n${data.evidence.B || '—'}\n\n`;
            md += `**C. What no longer requires escalation?**\n${data.evidence.C || '—'}\n\n`;
            md += `**D. What can a new hire do without tribal knowledge?**\n${data.evidence.D || '—'}\n\n`;
            md += `**E. What happens when the expert is unavailable?**\n${data.evidence.E || '—'}\n\n`;

            md += `---\n\n`;
            md += `## Verification Statement\n\n`;
            if (data.verification.verifiedBy) {
                md += `**Verified independent by:** ${data.verification.verifiedBy}, ${data.verification.role || '—'}, ${data.verification.date || '—'}\n\n`;
            } else {
                md += `*Not yet verified.*\n\n`;
            }

            md += `---\n\n`;
            md += `*This tool surfaces evidence. The human signs the verification.*\n`;

            const blob = new Blob([md], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `verification-${data.case.name?.replace(/\s+/g, '-') || 'case'}-${new Date().toISOString().split('T')[0]}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // No auto-initialization of verifiedDate - signing must be intentional

        // Update verification status display
        function updateVerificationStatus() {
            const name = document.getElementById('verifiedBy').value.trim();
            const statusText = document.getElementById('verificationStatusText');
            if (name) {
                statusText.textContent = 'Verification statement provided';
                statusText.style.color = 'var(--recovery-olive)';
            } else {
                statusText.textContent = 'Not yet verified';
                statusText.style.color = 'var(--text-muted)';
            }
        }

        // Attach listeners
        document.getElementById('verifiedBy').addEventListener('input', updateVerificationStatus);
        document.getElementById('verifiedRole').addEventListener('input', updateVerificationStatus);
        document.getElementById('verifiedDate').addEventListener('change', updateVerificationStatus);
    </script>
</body>
</html>
